# 기능 명세서: ClipPilot MVP - AI 숏폼 크리에이터 자동화 SaaS

**Feature Branch**: `001-clippilot-mvp`
**Created**: 2025-10-27
**Status**: Draft
**Input**: "AI 숏폼 크리에이터 자동화 SaaS - 아이디어에서 스크립트, 영상, 썸네일 생성 및 YouTube 자동 업로드까지 1클릭 워크플로우"

## User Scenarios & Testing *(mandatory)*

<!--
  IMPORTANT: User stories should be PRIORITIZED as user journeys ordered by importance.
  Each user story/journey must be INDEPENDENTLY TESTABLE - meaning if you implement just ONE of them,
  you should still have a viable MVP (Minimum Viable Product) that delivers value.
  
  Assign priorities (P1, P2, P3, etc.) to each story, where P1 is the most critical.
  Think of each story as a standalone slice of functionality that can be:
  - Developed independently
  - Tested independently
  - Deployed independently
  - Demonstrated to users independently
-->

### User Story 0 - 사용자 인증 및 회원가입 (Priority: P0)

신규 사용자가 간단한 회원가입 후 바로 서비스를 사용할 수 있으며, 로그인한 사용자만 콘텐츠 생성과 업로드 기능을 이용할 수 있다.

**Why this priority**: 모든 기능의 전제 조건입니다. 사용자 계정 없이는 플랜 관리, 사용량 추적, YouTube 연동 등 어떤 기능도 작동할 수 없습니다.

**Independent Test**: 사용자가 이메일과 비밀번호로 회원가입을 완료하고, 로그인 후 대시보드에 접근할 수 있는지 확인하여 독립적으로 테스트할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 처음 방문한 사용자가 랜딩 페이지에 접속했을 때, **When** 이메일과 비밀번호를 입력하고 "회원가입" 버튼을 클릭하면, **Then** 계정이 생성되고 Free 플랜으로 자동 설정되며 대시보드로 이동한다.

2. **Given** 기존 사용자가 로그인 페이지에 접속했을 때, **When** 올바른 이메일/비밀번호를 입력하면, **Then** 세션이 생성되고 마지막 작업 화면으로 이동한다.

3. **Given** 사용자가 비밀번호를 잊어버렸을 때, **When** "비밀번호 재설정" 링크를 클릭하고 이메일을 입력하면, **Then** 재설정 링크가 포함된 이메일이 발송된다.

4. **Given** 사용자가 잘못된 비밀번호를 3회 연속 입력했을 때, **When** 4번째 로그인을 시도하면, **Then** "너무 많은 로그인 시도. 15분 후 다시 시도해주세요" 메시지가 표시되고 계정이 일시적으로 잠긴다.

---

### User Story 1 - 프롬프트 기반 콘텐츠 자동 생성 (Priority: P0)

1인 크리에이터가 키워드나 주제를 입력하면, 시스템이 자동으로 스크립트, 자막(SRT), 썸네일 카피를 생성한다. 크리에이터는 생성된 결과물을 미리보기하고 필요시 수정할 수 있다.

**Why this priority**: 이 기능은 ClipPilot의 핵심 가치 제안입니다. 크리에이터가 콘텐츠 제작 시간을 80% 단축할 수 있는 가장 기본적인 자동화 기능이며, 이것 없이는 다른 모든 기능이 무의미합니다.

**Independent Test**: 사용자가 프롬프트를 입력하고 "생성" 버튼을 클릭했을 때, 30초 이내에 완성된 스크립트, 자막, 썸네일 카피가 화면에 표시되는지 확인하여 독립적으로 테스트할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 로그인한 사용자가 대시보드에 있을 때, **When** "새 프로젝트" 버튼을 클릭하고 키워드(예: "스마트폰 리뷰")와 영상 길이(60초), 톤(정보성)을 입력한 후 "생성" 버튼을 클릭하면, **Then** 시스템은 해당 주제에 맞는 스크립트(약 150-200단어), 타임코드가 포함된 SRT 자막, 썸네일 카피(제목+설명)를 생성하여 화면에 표시한다.

2. **Given** 콘텐츠 생성이 완료된 상태에서, **When** 사용자가 생성된 스크립트를 수정하고 "재생성" 버튼을 클릭하면, **Then** 수정된 스크립트를 반영하여 자막과 썸네일 카피가 다시 생성된다.

3. **Given** 사용자가 템플릿을 저장해둔 상태에서, **When** 새 프로젝트 생성 시 저장된 템플릿을 선택하면, **Then** 해당 템플릿의 브랜드 설정(폰트, 색상, 인트로/아웃로)이 자동으로 적용된 콘텐츠가 생성된다.

---

### User Story 2 - 영상 렌더링 및 YouTube 자동 업로드 (Priority: P0)

크리에이터가 생성된 콘텐츠를 확인한 후, 1클릭으로 영상을 렌더링하고 YouTube에 자동으로 업로드할 수 있다. 시스템은 스톡 영상/이미지를 자동으로 매칭하고, 자막을 합성하며, 썸네일과 메타데이터(제목, 설명, 태그)를 함께 업로드한다.

**Why this priority**: 단순한 콘텐츠 생성을 넘어 실제 업로드까지 자동화하는 것이 ClipPilot의 핵심 차별점입니다. 이 기능이 없으면 사용자는 여전히 수동으로 영상을 편집하고 업로드해야 하므로 시간 절감 효과가 제한적입니다.

**Independent Test**: 생성된 콘텐츠를 선택하고 "YouTube 업로드" 버튼을 클릭했을 때, 3분 이내에 렌더링이 완료되고 YouTube 채널에 영상이 초안 상태로 업로드되는지 확인하여 독립적으로 테스트할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 스크립트와 자막이 생성된 상태에서, **When** 사용자가 "영상 생성 및 업로드" 버튼을 클릭하고 연결된 YouTube 채널을 선택하면, **Then** 시스템은 스톡 영상/이미지를 자동으로 매칭하고, 자막을 합성하여 60초 영상을 렌더링한 후, YouTube에 초안 상태로 업로드한다(제목, 설명, 태그, 썸네일 포함).

2. **Given** 영상 렌더링이 진행 중일 때, **When** 사용자가 작업 대시보드를 확인하면, **Then** 현재 렌더링 진행 상태(대기중/처리중/완료/실패)와 예상 소요 시간이 실시간으로 표시된다.

3. **Given** 영상이 YouTube에 초안으로 업로드된 상태에서, **When** 사용자가 "공개로 전환" 버튼을 클릭하거나 예약 게시 시간을 설정하면, **Then** 해당 영상이 지정된 시간에 자동으로 공개 상태로 변경된다.

4. **Given** 영상 렌더링이 실패한 경우, **When** 사용자가 작업 대시보드에서 실패한 작업을 확인하면, **Then** 실패 사유(예: YouTube API 오류, 렌더링 타임아웃)가 명확히 표시되고 "재시도" 버튼이 제공된다.

---

### User Story 3 - 템플릿 및 브랜드 프리셋 관리 (Priority: P1)

크리에이터가 자신의 브랜드 아이덴티티(폰트, 색상, 로고, 인트로/아웃로, 자막 스타일)를 템플릿으로 저장하고, 이후 프로젝트에서 재사용할 수 있다.

**Why this priority**: 일관된 브랜드 이미지는 채널 성장에 중요하며, 템플릿 기능은 반복 작업을 최소화하여 생산성을 크게 향상시킵니다. P0 기능이 동작한 후 바로 필요한 기능입니다.

**Independent Test**: 사용자가 템플릿을 생성/저장하고, 새 프로젝트에서 해당 템플릿을 불러왔을 때 모든 브랜드 설정이 정확히 적용되는지 확인하여 독립적으로 테스트할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 로그인한 사용자가 설정 페이지에 접근했을 때, **When** "새 템플릿 만들기"를 클릭하고 템플릿 이름, 자막 폰트/크기/색상, 인트로 영상(5초), 아웃로 영상(5초), 로고 워터마크 위치를 설정한 후 저장하면, **Then** 템플릿이 사용자 계정에 저장되고 템플릿 목록에 표시된다.

2. **Given** 저장된 템플릿이 있는 상태에서, **When** 새 프로젝트 생성 시 템플릿을 선택하면, **Then** 해당 템플릿의 모든 설정(폰트, 색상, 인트로/아웃로, 워터마크)이 자동으로 적용된다.

3. **Given** 기존 템플릿이 있을 때, **When** 사용자가 템플릿을 수정하거나 삭제하면, **Then** 변경사항이 즉시 반영되고, 이미 생성된 프로젝트에는 영향을 주지 않는다.

4. **Given** 신규 사용자가 처음 프로젝트를 생성할 때, **When** 템플릿 선택 화면에 접근하면, **Then** 시스템 제공 기본 템플릿 3개(리뷰 스타일, 뉴스 스타일, 교육 스타일)가 미리보기와 함께 표시되며, 사용자는 이를 선택하거나 커스터마이징할 수 있다.

---

### User Story 4 - 결제 및 플랜 관리 (Priority: P1)

사용자가 Free 플랜에서 Pro 또는 Agency 플랜으로 업그레이드하거나, 플랜을 변경/해지할 수 있다. 시스템은 사용량을 추적하고 플랜별 제한을 적용한다.

**Why this priority**: 수익화는 서비스 지속 가능성의 핵심입니다. MVP 출시 초기부터 결제 시스템이 안정적으로 작동해야 비즈니스 모델을 검증할 수 있습니다.

**Independent Test**: 사용자가 플랜 업그레이드를 완료하고 결제가 성공했을 때, 즉시 업그레이드된 플랜의 기능과 사용량 한도가 적용되는지 확인하여 독립적으로 테스트할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** Free 플랜 사용자가 월 20회 생성 한도에 도달했을 때, **When** 새 프로젝트를 생성하려고 시도하면, **Then** "한도 초과" 메시지와 함께 "Pro로 업그레이드" 버튼이 표시된다.

2. **Given** 사용자가 "Pro로 업그레이드" 버튼을 클릭했을 때, **When** 결제 페이지에서 카드 정보를 입력하고 결제를 완료하면, **Then** 즉시 Pro 플랜으로 전환되고 월 500회 생성 한도와 모든 Pro 기능(자동 업로드, 스케줄링, 템플릿)이 활성화된다.

3. **Given** Pro 플랜 사용자가 설정 페이지에 접근했을 때, **When** "플랜 해지" 버튼을 클릭하고 확인하면, **Then** 현재 결제 주기가 끝날 때까지 Pro 기능을 계속 사용할 수 있으며, 다음 주기부터 Free 플랜으로 자동 전환된다.

4. **Given** 결제가 실패한 경우(예: 카드 한도 초과), **When** 시스템이 결제 실패를 감지하면, **Then** 사용자에게 이메일 알림이 발송되고, 3일의 유예 기간 동안 재결제를 시도할 수 있으며, 유예 기간 이후에도 실패 시 Free 플랜으로 다운그레이드된다.

5. **Given** Free 플랜 사용자가 월 16회 생성을 완료했을 때(80%), **When** 대시보드에 접속하면, **Then** 상단에 "이번 달 생성 한도 16/20 사용 중. Pro로 업그레이드하시겠습니까?" 배너가 표시된다.

---

### User Story 5 - 대시보드 및 사용 현황 추적 (Priority: P2)

사용자가 자신의 콘텐츠 생성 기록, 성공률, 렌더링 시간, 사용량, 비용 추정을 한눈에 확인할 수 있다.

**Why this priority**: 사용자가 자신의 생산성 향상을 확인하고 서비스 가치를 실감할 수 있게 하여 잔존율과 만족도를 높입니다. 핵심 기능이 안정화된 후 추가하는 것이 적합합니다.

**Independent Test**: 사용자가 대시보드에 접속했을 때, 최근 30일간의 생성 건수, 성공률, 평균 렌더링 시간, 사용량이 정확히 표시되는지 확인하여 독립적으로 테스트할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 사용자가 여러 프로젝트를 생성한 이력이 있을 때, **When** 대시보드에 접속하면, **Then** 최근 30일간의 총 생성 건수, 성공률(%), 실패 건수, 평균 렌더링 시간, 현재 플랜의 잔여 사용량이 차트와 숫자로 표시된다.

2. **Given** 대시보드에서 작업 히스토리를 확인할 때, **When** 특정 프로젝트를 클릭하면, **Then** 해당 프로젝트의 상세 정보(생성일시, 프롬프트, 스크립트, 렌더링 시간, 업로드 상태, YouTube 링크)가 표시된다.

3. **Given** Agency 플랜 사용자가 여러 채널을 관리할 때, **When** 대시보드에서 채널별 필터를 적용하면, **Then** 선택한 채널의 통계와 작업 히스토리만 표시된다.

---

### User Story 6 - YouTube 채널 연동 및 OAuth 인증 (Priority: P0)

사용자가 자신의 YouTube 채널을 ClipPilot에 안전하게 연결하여, 영상과 썸네일을 자동으로 업로드할 수 있다.

**Why this priority**: YouTube 업로드 자동화는 ClipPilot의 핵심 기능이며, OAuth 인증은 이를 위한 필수 전제 조건입니다. 보안과 사용자 신뢰를 위해 초기부터 올바르게 구현되어야 합니다.

**Independent Test**: 사용자가 "YouTube 채널 연결" 버튼을 클릭하고 OAuth 인증을 완료했을 때, 연결된 채널 정보가 정확히 표시되고 이후 업로드가 정상적으로 작동하는지 확인하여 독립적으로 테스트할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 신규 사용자가 회원가입을 완료했을 때, **When** 온보딩 단계에서 "YouTube 채널 연결" 버튼을 클릭하면, **Then** Google OAuth 인증 페이지로 리디렉션되고, 사용자가 권한을 승인하면 채널 정보(채널명, 프로필 이미지)가 ClipPilot에 저장되고 표시된다.

2. **Given** YouTube 채널이 연결된 상태에서, **When** 토큰이 만료되거나 사용자가 외부에서 권한을 취소했을 때, **Then** 다음 업로드 시도 시 "재인증 필요" 메시지가 표시되고, 사용자가 재인증을 완료하면 정상적으로 업로드가 진행된다.

3. **Given** 사용자가 여러 YouTube 채널을 운영하는 경우, **When** 설정에서 "채널 추가" 버튼을 클릭하고 OAuth 인증을 완료하면, **Then** 추가 채널이 계정에 연결되고, 프로젝트 생성 시 업로드할 채널을 선택할 수 있다.

---

### User Story 7 - 신규 사용자 온보딩 (Priority: P1)

신규 사용자가 회원가입 후 YouTube 채널 연결, 첫 프로젝트 생성, 템플릿 설정까지 단계별 가이드를 통해 쉽게 완료할 수 있다.

**Why this priority**: 첫 사용 경험은 사용자 전환율과 잔존율에 직접적인 영향을 미칩니다. 온보딩 성공률 90% 목표(SC-008) 달성을 위해 필수입니다.

**Independent Test**: 신규 사용자가 회원가입부터 첫 번째 프로젝트 완료까지 5분 이내에 완료할 수 있는지 확인하여 독립적으로 테스트할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 사용자가 회원가입을 완료했을 때, **When** 대시보드로 이동하면, **Then** "환영합니다! 3단계로 첫 영상을 만들어보세요" 온보딩 모달이 표시되며, 단계별 가이드(1. YouTube 연결, 2. 템플릿 선택, 3. 첫 프로젝트 생성)가 제공된다.

2. **Given** 온보딩 모달에서 1단계를 완료했을 때, **When** 2단계로 이동하면, **Then** 기본 템플릿 3개(리뷰 스타일, 뉴스 스타일, 교육 스타일)가 미리보기와 함께 표시되며, 사용자는 하나를 선택하거나 건너뛸 수 있다.

3. **Given** 온보딩 3단계를 완료했을 때, **When** "첫 프로젝트 시작" 버튼을 클릭하면, **Then** 프로젝트 생성 페이지로 이동하며, 입력 필드에 샘플 프롬프트("최신 스마트폰 리뷰 영상 만들기")가 미리 채워져 있다.

4. **Given** 사용자가 온보딩을 건너뛰었을 때, **When** 나중에 설정 페이지에 접근하면, **Then** "온보딩 가이드 다시 보기" 버튼이 제공된다.

---

### Edge Cases

- **프롬프트가 너무 짧거나 모호한 경우**: 사용자가 "영상"과 같은 단일 키워드만 입력하면 어떻게 처리할까? → 시스템은 최소 5단어 이상 입력을 요구하거나, 자동으로 관련 질문을 생성하여 사용자로부터 추가 정보를 수집한다.

- **렌더링 중 사용자가 브라우저를 닫는 경우**: 렌더링 작업은 백그라운드에서 계속 진행되며, 사용자가 다시 로그인하면 완료된 결과를 확인할 수 있다. 작업 상태는 DB에 저장되고 큐 시스템이 관리한다.

- **YouTube API 할당량 초과**: YouTube Data API는 일일 할당량이 제한되어 있다. 시스템은 할당량 초과 시 사용자에게 "일시적으로 업로드가 지연될 수 있습니다" 메시지를 표시하고, 자동으로 재시도 큐에 등록한다.

- **동시에 여러 프로젝트를 생성하는 경우**: 시스템은 작업 큐를 통해 순차적으로 처리하며, 사용자에게 대기열 위치와 예상 대기 시간을 표시한다.

- **부적절한 콘텐츠 요청(성인/폭력/증오 발화)**: 프롬프트 단계에서 콘텐츠 필터링 시스템이 감지하여 생성을 차단하고, 사용자에게 정책 위반 메시지를 표시한다.

- **스톡 이미지/영상 라이선스 문제**: 시스템은 Pexels/Unsplash와 같은 무료 라이선스 스톡 API만 사용하며, 사용자에게 상업적 이용 가능 범위를 명확히 고지한다.

- **네트워크 오류로 업로드 실패**: 시스템은 자동으로 최대 3회 재시도하며, 실패 시 사용자에게 알림을 보내고 로컬 백업 파일을 보관하여 수동 업로드 옵션을 제공한다.

- **플랜 다운그레이드 시 진행 중인 작업**: 현재 렌더링 중인 작업은 완료까지 보장하며, 다운그레이드는 다음 결제 주기부터 적용된다.

- **Foreign language 프롬프트**: 사용자가 영어가 아닌 언어(한국어, 일본어 등)로 프롬프트를 입력하면, 시스템은 해당 언어로 스크립트와 메타데이터를 생성한다.

- **사용자가 계정 삭제를 요청하는 경우**: 시스템은 30일 이내에 모든 개인정보(이메일, OAuth 토큰)를 완전히 삭제해야 한다. 단, 법적 요구사항에 따라 결제 기록은 5년간 익명화하여 보관한다.

- **API 속도 제한 초과**: 사용자가 짧은 시간 내에 여러 프로젝트를 생성하려고 하면(분당 60회 초과), 시스템은 속도 제한을 적용하고 "요청이 너무 많습니다. 1분 후 다시 시도해주세요" 메시지와 함께 재시도 가능 시간을 알려준다.

- **렌더링 큐 폭주**: 동시에 50개 이상의 렌더링 요청이 들어오면, 시스템은 플랜별 우선순위(Pro/Agency > Free)에 따라 처리하고, Free 플랜 사용자에게 "현재 혼잡 시간입니다. 예상 대기 시간: 10분" 메시지를 표시한다.

## Requirements

### Functional Requirements

- **FR-001**: 시스템은 사용자가 키워드, 영상 길이(15초/30초/60초), 톤(정보성/재미/감동) 등을 입력받아 해당 주제에 맞는 스크립트를 생성해야 한다.

- **FR-002**: 시스템은 생성된 스크립트를 기반으로 타임코드가 포함된 SRT 자막 파일과 썸네일 카피(제목, 설명)를 자동으로 생성해야 한다.

- **FR-003**: 시스템은 스크립트에 맞는 스톡 영상/이미지를 자동으로 검색하고 매칭하여, 사용자가 별도의 소스를 업로드하지 않아도 영상을 생성할 수 있어야 한다.

- **FR-004**: 시스템은 자막, 스톡 소스, 배경음악(선택), 인트로/아웃로를 합성하여 최종 영상 파일(MP4)을 렌더링해야 한다.

- **FR-005**: 시스템은 렌더링된 영상을 YouTube Data API를 통해 자동으로 업로드하며, 제목, 설명, 태그, 썸네일을 함께 업로드해야 한다.

- **FR-006**: 시스템은 YouTube 업로드 시 초안(Draft) 또는 공개(Public) 상태를 선택할 수 있어야 하며, 예약 게시(Scheduled) 기능을 지원해야 한다.

- **FR-007**: 사용자는 자신의 브랜드 설정(폰트, 색상, 로고, 인트로/아웃로, 자막 스타일)을 템플릿으로 저장하고, 이후 프로젝트에서 재사용할 수 있어야 한다.

- **FR-008**: 시스템은 Free, Pro, Agency 세 가지 플랜을 제공하며, 각 플랜별로 월간 생성 한도를 적용해야 한다(Free: 20회, Pro: 500회, Agency: 2,000회).

- **FR-009**: 사용자가 결제를 완료하면 즉시 업그레이드된 플랜의 기능과 한도가 적용되어야 하며, 플랜 해지 시 현재 결제 주기가 끝날 때까지 기능을 유지해야 한다.

- **FR-010**: 시스템은 작업 대시보드에서 모든 프로젝트의 상태(대기중/처리중/완료/실패)를 실시간으로 표시하고, 실패한 작업의 사유를 명확히 제공해야 한다.

- **FR-011**: 시스템은 렌더링 실패 시 자동으로 재시도(최대 3회)해야 하며, 사용자가 수동으로 재시도할 수 있는 버튼을 제공해야 한다.

- **FR-012**: 사용자는 Google OAuth를 통해 YouTube 채널을 연결해야 하며, 시스템은 최소 권한(업로드 권한만)으로 토큰을 요청해야 한다.

- **FR-013**: 시스템은 YouTube API 토큰 만료 시 사용자에게 재인증을 요청해야 하며, 재인증 전까지 업로드 기능을 일시 중지해야 한다.

- **FR-014**: 시스템은 사용자가 입력한 프롬프트에서 부적절한 콘텐츠(성인/폭력/증오 발화)를 감지하여 생성을 차단하고, 정책 위반 메시지를 표시해야 한다.

- **FR-015**: 시스템은 대시보드에서 최근 30일간의 총 생성 건수, 성공률, 실패 건수, 평균 렌더링 시간, 잔여 사용량을 차트와 숫자로 표시해야 한다.

- **FR-016**: Agency 플랜 사용자는 여러 YouTube 채널을 연결하고, 프로젝트 생성 시 업로드할 채널을 선택할 수 있어야 한다.

- **FR-017**: 시스템은 결제 처리를 위해 Stripe(국제) 또는 아임포트(국내)와 연동해야 하며, 웹훅을 통해 구독 상태를 실시간으로 동기화해야 한다.

- **FR-018**: 시스템은 모든 보안 이벤트(로그인, 결제, 권한 변경, 업로드)를 감사 로그로 기록해야 한다.

- **FR-019**: 시스템은 사용자가 생성된 스크립트, 자막, 썸네일 카피를 직접 수정할 수 있는 편집 기능을 제공해야 한다.

- **FR-020**: 시스템은 렌더링 진행 중인 작업의 진행률(%)과 예상 완료 시간을 실시간으로 표시해야 한다.

- **FR-021**: 시스템은 이메일 기반 회원가입을 지원해야 하며, 이메일 형식 검증과 중복 확인을 수행해야 한다.

- **FR-022**: 비밀번호는 최소 8자 이상, 영문/숫자/특수문자 조합을 요구해야 하며, 안전하게 해시화하여 저장해야 한다.

- **FR-023**: 시스템은 세션 기반 인증을 제공하며, 세션 만료 시 자동으로 로그아웃 처리해야 한다.

- **FR-024**: 사용자는 비밀번호 재설정 이메일을 통해 계정 복구가 가능해야 한다.

- **FR-025**: 사용자는 설정 페이지에서 "계정 삭제"를 요청할 수 있어야 하며, 시스템은 30일 이내에 모든 개인 데이터를 삭제해야 한다.

- **FR-026**: 삭제된 계정은 복구 불가능하며, 같은 이메일로 재가입 시 새로운 계정으로 처리되어야 한다.

- **FR-027**: 시스템은 90일 이상 로그인하지 않은 Free 플랜 사용자에게 계정 삭제 안내 이메일을 발송해야 한다.

- **FR-028**: 렌더링 실패 시 사용자에게 다음 정보를 제공해야 한다: 실패 시각, 실패 원인(예: "YouTube API 할당량 초과", "렌더링 타임아웃"), 재시도 가능 여부, 예상 재시도 시간.

- **FR-029**: 업로드 실패 시 사용자에게 다음 옵션을 제공해야 한다: 자동 재시도 대기, 수동 재시도, 렌더링된 영상 다운로드(백업).

- **FR-030**: 시스템은 모든 사용자 대면 오류 메시지를 한국어로 제공해야 하며, 기술적 세부사항 대신 사용자가 이해할 수 있는 언어로 작성해야 한다.

- **FR-031**: 시스템은 신규 사용자를 위해 3가지 니치별 기본 템플릿을 제공해야 한다(리뷰, 뉴스, 교육).

- **FR-032**: 사용자는 기본 템플릿을 선택한 후 폰트, 색상, 워터마크 위치 등을 커스터마이징하여 저장할 수 있어야 한다.

- **FR-033**: 사용자가 월간 생성 한도의 80%에 도달하면 대시보드 상단에 알림 배너가 표시되어야 한다("이번 달 생성 한도 16/20 사용 중").

- **FR-034**: 사용자가 월간 생성 한도의 100%에 도달하면 이메일 알림이 발송되며, 업그레이드 링크가 포함되어야 한다.

- **FR-035**: Pro 플랜 사용자가 500회 한도를 모두 사용한 경우, 초과 과금 옵션(1회당 200원)을 활성화할 수 있어야 한다.

- **FR-036**: 사용자가 API 속도 제한을 초과하면, "요청이 너무 많습니다. 1분 후 다시 시도해주세요" 메시지가 표시되어야 한다.

- **FR-037**: 신규 사용자는 회원가입 후 온보딩 가이드를 통해 YouTube 채널 연결, 템플릿 선택, 첫 프로젝트 생성을 단계별로 안내받아야 한다.

- **FR-038**: 사용자는 온보딩을 건너뛸 수 있으며, 나중에 설정에서 다시 볼 수 있어야 한다.

- **FR-039**: 렌더링 작업은 다음 우선순위로 처리되어야 한다: 1) Pro/Agency 플랜 사용자(높음), 2) Free 플랜 사용자(보통), 3) 재시도 작업(낮음).

- **FR-040**: 대기열에서 대기 중인 사용자에게 "현재 대기 순서: 3번째, 예상 대기 시간: 5분" 정보가 표시되어야 한다.

### Non-Functional Requirements

#### Performance

- **NFR-001**: 콘텐츠 생성 API는 3초 이내에 응답해야 한다(큐 처리 제외).

- **NFR-002**: 60초 영상 렌더링은 평균 3분 이내에 완료되어야 한다.

- **NFR-003**: 대시보드는 1초 이내에 로드되어야 한다.

#### Scalability

- **NFR-004**: 시스템은 1,000명의 동시 사용자를 처리할 수 있어야 한다.

- **NFR-005**: 렌더링 워커는 수요에 따라 자동으로 확장/축소되어야 한다.

#### Availability

- **NFR-006**: 시스템 가용성은 99.5% 이상이어야 한다(월간 다운타임 3.6시간 이하).

- **NFR-007**: 렌더링 실패 시 자동 재시도 메커니즘이 동작해야 한다.

#### Security

- **NFR-008**: 모든 API 통신은 HTTPS를 통해 암호화되어야 한다.

- **NFR-009**: YouTube OAuth 토큰은 암호화하여 저장해야 한다.

- **NFR-010**: 사용자 비밀번호는 산업 표준 해시 알고리즘으로 암호화해야 한다.

- **NFR-011**: 민감한 환경 변수는 환경 변수 또는 시크릿 관리 도구로 관리해야 한다.

#### Observability

- **NFR-012**: 모든 API 요청은 구조화된 로그로 기록되어야 한다(요청ID, 사용자ID, 작업ID 포함).

- **NFR-013**: 시스템은 렌더링 평균 시간, 성공률, 에러율 등의 메트릭을 실시간으로 추적해야 한다.

- **NFR-014**: 에러율 급증, 큐 적체 시 자동 알람이 발송되어야 한다.

#### Cost Management

- **NFR-015**: 월 인프라 비용은 초기 단계에서 10만원 이하로 유지되어야 한다.

- **NFR-016**: LLM API 비용이 일일 한도를 초과하면 알람이 발송되어야 한다.

#### Rate Limiting

- **NFR-017**: API는 사용자당 분당 60회 요청으로 제한되어야 한다.

- **NFR-018**: Rate Limit 초과 시 429 상태 코드와 함께 재시도 가능 시간을 응답해야 한다.

#### Accessibility

- **NFR-019**: 모든 UI 요소는 키보드만으로 탐색 가능해야 한다(Tab, Enter, Esc).

- **NFR-020**: 모든 이미지와 버튼에는 대체 텍스트가 포함되어야 한다.

- **NFR-021**: 색상 대비는 WCAG 2.1 AA 기준을 충족해야 한다(4.5:1 이상).

### Key Entities

- **User(사용자)**: 이메일, 현재 플랜(Free/Pro/Agency), OAuth 제공자 정보, 가입일을 포함한다. 여러 채널과 템플릿을 소유할 수 있다.

- **Channel(채널)**: YouTube 채널 ID, 사용자 ID, OAuth 액세스 토큰 메타데이터, 생성일을 포함한다. 한 사용자가 여러 채널을 소유할 수 있다(Agency 플랜).

- **Template(템플릿)**: 사용자 ID, 템플릿 이름, 브랜드 설정(폰트, 색상, 인트로/아웃로, 워터마크 등을 JSON으로 저장), 생성일을 포함한다. 사용자가 반복 사용하는 브랜드 프리셋을 저장한다.

- **Job(작업)**: 사용자 ID, 작업 상태(queued/running/failed/done), 프롬프트, 생성된 스크립트, SRT 자막, 메타데이터(제목/설명/태그), 렌더링된 영상 URL, 에러 메시지, 생성일을 포함한다. 사용자의 콘텐츠 생성 요청을 추적한다.

- **Subscription(구독)**: 사용자 ID, 플랜(Free/Pro/Agency), 구독 상태(active/cancelled/past_due), 결제 제공자의 고객 ID, 현재 결제 주기 종료일을 포함한다. 사용자의 결제 상태를 추적한다.

- **UsageLog(사용 로그)**: 사용자 ID, 작업 ID, 사용된 토큰 수(입력/출력), 렌더링 소요 시간(초), API 비용 추정치, 생성일을 포함한다. 사용자의 사용량과 비용을 추적한다.

- **Webhook(웹훅)**: 웹훅 타입(payment/subscription), 페이로드(JSON), 생성일을 포함한다. 외부 서비스(Stripe/아임포트)로부터의 이벤트를 기록한다.

## Success Criteria

### Measurable Outcomes

- **SC-001**: 사용자는 프롬프트 입력부터 최종 영상 업로드까지 전체 과정을 3분 이내에 완료할 수 있어야 한다(60초 영상 기준).

- **SC-002**: 콘텐츠 생성 성공률이 95% 이상이어야 한다(렌더링 실패, API 오류 등을 포함한 전체 성공률).

- **SC-003**: 시스템은 1,000명의 동시 사용자가 콘텐츠 생성을 요청해도 성능 저하 없이 처리할 수 있어야 한다.

- **SC-004**: Free 플랜에서 Pro 플랜으로의 전환율이 10% 이상이어야 한다(30일 이내).

- **SC-005**: 사용자의 4주 잔존율이 35% 이상이어야 한다.

- **SC-006**: 렌더링된 영상의 평균 렌더링 시간이 60초 영상 기준 3분 이하여야 한다.

- **SC-007**: YouTube 업로드 실패율이 2% 이하여야 한다(토큰 만료, API 오류 등 포함).

- **SC-008**: 사용자의 90% 이상이 첫 번째 프로젝트를 성공적으로 완료해야 한다(온보딩 성공률).

- **SC-009**: 결제 프로세스 완료율이 80% 이상이어야 한다(결제 페이지 진입부터 완료까지).

- **SC-010**: 시스템 가용성이 99.5% 이상이어야 한다(월간 다운타임 3.6시간 이하).

- **SC-011**: 90일 내에 MRR(월간 반복 매출) 300만원을 달성해야 한다(목표 유료 사용자 160명).

- **SC-012**: 사용자는 템플릿을 생성하고 적용하는 데 1분 이내에 완료할 수 있어야 한다.
